<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Detectron2 install BUG</title>
    <link href="/2024/11/09/Detectron2-install-BUG/"/>
    <url>/2024/11/09/Detectron2-install-BUG/</url>
    
    <content type="html"><![CDATA[<h1 id="Detectron2-安装问题解决方案"><a href="#Detectron2-安装问题解决方案" class="headerlink" title="Detectron2 安装问题解决方案"></a>Detectron2 安装问题解决方案</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>安装 Detectron2 时遇到以下错误：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">ImportError: libtorch_cuda_cu.<span class="hljs-keyword">so</span>: cannot <span class="hljs-keyword">open</span> shared object <span class="hljs-keyword">file</span>: <span class="hljs-keyword">No</span> such <span class="hljs-keyword">file</span> or directory<br></code></pre></td></tr></table></figure><p>这个错误通常由 CUDA 版本与 PyTorch 版本不匹配导致。本指南将帮助你正确配置环境。</p><h2 id="环境检查"><a href="#环境检查" class="headerlink" title="环境检查"></a>环境检查</h2><h3 id="1-检查-CUDA-版本"><a href="#1-检查-CUDA-版本" class="headerlink" title="1. 检查 CUDA 版本"></a>1. 检查 CUDA 版本</h3><p>首先确认系统安装的 CUDA 版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 方法1：检查 NVCC 版本</span><br>nvcc --version<br><br><span class="hljs-comment"># 方法2：检查 CUDA 版本</span><br>nvidia-smi<br></code></pre></td></tr></table></figure><h3 id="2-检查-PyTorch-版本"><a href="#2-检查-PyTorch-版本" class="headerlink" title="2. 检查 PyTorch 版本"></a>2. 检查 PyTorch 版本</h3><p>检查当前环境中的 PyTorch 版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip show torch<br></code></pre></td></tr></table></figure><h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><h3 id="1-创建虚拟环境（推荐）"><a href="#1-创建虚拟环境（推荐）" class="headerlink" title="1. 创建虚拟环境（推荐）"></a>1. 创建虚拟环境（推荐）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 创建新的虚拟环境</span><br>conda create -n detectron2 python=3.8<br><br><span class="hljs-comment"># 激活虚拟环境</span><br>conda activate detectron2<br></code></pre></td></tr></table></figure><h3 id="2-安装-PyTorch"><a href="#2-安装-PyTorch" class="headerlink" title="2. 安装 PyTorch"></a>2. 安装 PyTorch</h3><p>根据你的 CUDA 版本选择对应的 PyTorch 版本。以下以 CUDA 11.3 为例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install torch==1.10.0+cu113 \<br>            torchvision==0.11.0+cu113 \<br>            torchaudio==0.10.0+cu113 \<br>            -f https://download.pytorch.org/whl/cu113/torch_stable.html \<br>            -i https://pypi.tuna.tsinghua.edu.cn/simple<br></code></pre></td></tr></table></figure><h3 id="3-安装-Detectron2"><a href="#3-安装-Detectron2" class="headerlink" title="3. 安装 Detectron2"></a>3. 安装 Detectron2</h3><p>确保 PyTorch 安装成功后，安装对应版本的 Detectron2：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">python -m pip install detectron2 -f \<br>  https://dl.fbaipublicfiles.com/detectron2/wheels/cu113/torch1.10/index.html<br></code></pre></td></tr></table></figure><h2 id="版本对应关系"><a href="#版本对应关系" class="headerlink" title="版本对应关系"></a>版本对应关系</h2><table><thead><tr><th>CUDA 版本</th><th>PyTorch 推荐版本</th><th>Detectron2 对应版本</th></tr></thead><tbody><tr><td>CUDA 11.3</td><td>1.10</td><td>0.6</td></tr><tr><td>CUDA 11.1</td><td>1.10</td><td>0.6</td></tr><tr><td>CUDA 10.2</td><td>1.10</td><td>0.6</td></tr></tbody></table><h2 id="其他建议"><a href="#其他建议" class="headerlink" title="其他建议"></a>其他建议</h2><p>如果使用 conda，可以考虑使用 conda 安装 CUDA 工具包</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="https://detectron2.readthedocs.io/en/latest/tutorials/install.html">Detectron2 官方安装指南</a></li><li><a href="https://pytorch.org/get-started/locally/">PyTorch 官方安装指南</a></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
